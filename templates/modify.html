<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<script type="text/javascript" src="static/js/jquery-3.1.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
	<script type="text/javascript">
		function setActiveStyleSheet(title) {
			var i, a;
			for (i = 0; (a = document.getElementsByTagName("link")[i]); i++) {
				if (a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
					a.disabled = true;
					if (a.getAttribute("title") == title) a.disabled = false;
				}
			}
		}
		function update() {
			$.ajax({
				type: "POST",
				url: " /update",
				data: $('#update').serialize(),
				success: function () {
					alert("SUCCESS!");
					parent.location.reload();
				},
				error: function () {
					alert("ERROR!");
				}
			});
		}

	</script>
	<style>
		.btn {
			width: 140px;
			height: 36px;
			line-height: 18px;
			font-size: 18px;
			background: url("/static/images/bg.gif");
			color: #124852;
			padding-bottom: 4px
		}
	</style>
	<link title="style1" rel="stylesheet" href="/static/css/style.css" type="text/css" />
	<link title="style2" rel="alternate stylesheet" href="/static/css/style2.css" type="text/css" />
	<link title="style3" rel="alternate stylesheet" href="/static/css/style3.css" type="text/css" />
</head>

<body>
	<div class="style_changer" style="margin-left:50px;">
		<div class="style_changer_text" style="float: left;">Themes:
			<input type="submit" value="1" onclick="setActiveStyleSheet('style1');" style="width:60px;height:25px;border:none;background:url(static/images/bg.gif) left top;"
			/>
			<input type="submit" value="2" onclick="setActiveStyleSheet('style2');" style="width:60px;height:25px;border:none;background:url(static/images/center_bg2.gif) left top;"
			/>
			<input type="submit" value="3" onclick="setActiveStyleSheet('style3');" style="width:60px;height:25px;border:none;background:url(static/images/center_bg3.gif) left top;"
			/>
		</div>

	</div>

	<div class="form_content">
		<script>
			function checkInput() {
				if (document.getElementById('exchange').value == ''
					|| document.getElementById('product').value == '') {
					alert('交易所 和 品种 为必填项');
					return false;
				}
				return true;
			}
			Vue.component('beautiful-div', {
				props: ['title', 'context'],
				template: `
					<div class="form-row">
						<div class="field-label">
							<label for="exchange">{{title}}</label>:</div>
						<div class="field-widget">
							<input name="exchange" title="请输入 "+{{title}} v-model="context"></input>
						</div>
					</div>

            	`,
				methods: {}
			});
			vm = new Vue({
				el: '#demo',
				data: {
					contexts: {'exchange':'zce', 'product':'soft'}
				}
			});
		</script>
		<form id="update" onsubmit="return checkInput()">
			<fieldset id='demo'>
				<beautiful_div v-bind:title='title' vbind:context='context' v-for="(context, title) in contexts"></beautiful_div>
			</fieldset>

			<input type="button" class="button" value="Submit" onclick="update()" />
			<input class="button" type="button" value="Reset" onclick="reset(); return false" />
		</form>
	</div>
	<script>
		function setValue() {
			for (c in context) {
				document.getElementById(c).value = context[c]
			}
		}
		setValue();
	</script>
</body>

</html>